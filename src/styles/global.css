@import "tailwindcss";

:root {
  color-scheme: light dark;
}

html,
body {
  height: 100%;
}
body {
  @apply bg-black text-white antialiased;
  font-family:
    "Atkinson",
    system-ui,
    -apple-system,
    Segoe UI,
    Roboto,
    Arial,
    sans-serif;
}

/* Safe-area support for iOS */
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

/* Screen-reader only utility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Utilities */
.panel {
  /* Square, solid black with slightly softened border */
  @apply border-2 border-white/80 bg-black rounded-md;
}
.btn {
  /* Square, high-contrast buttons */
  @apply border-2 border-white px-3 py-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed;
  background: black;
  color: white;
}
.btn:hover {
  background: white;
  color: black;
}
.input {
  @apply border border-white bg-black px-3 py-2 outline-none focus:border-white;
}

/* Player specific helpers */
.player-bar {
  @apply border-t border-white;
  padding-bottom: env(safe-area-inset-bottom);
}
.btn-square {
  /* Fixed square controls */
  width: 2.5rem; /* 40px */
  height: 2.5rem;
  display: grid;
  place-items: center;
}

/* Music-player specific controls */
.control-btn {
  @apply grid place-items-center rounded-full border-2 border-white bg-black text-white transition-transform transition-colors outline-none;
  width: 3rem; /* larger tap target on mobile */
  height: 3rem;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  border-width: 3px; /* make outlines feel bolder on high-DPI */
}
.control-btn:hover {
  @apply bg-white text-black;
}
.control-btn:active {
  transform: scale(0.96);
}
.control-btn:focus-visible {
  @apply ring-2 ring-white ring-offset-2 ring-offset-black;
}
.control-btn.primary {
  width: 3.5rem;
  height: 3.5rem;
}
/* Clear on/off state */
.control-btn[data-active="true"] {
  @apply bg-white text-black ring-2 ring-white ring-offset-1 ring-offset-black;
}
.control-btn[data-active="false"] {
  @apply opacity-70;
}

.queue-item {
  @apply flex items-center gap-2 justify-between border-2 border-white rounded-sm px-3 py-2 text-left hover:bg-white hover:text-black transition-colors;
}

/* Album selector pills */
.pill {
  @apply border border-white rounded-full px-3 py-1 text-sm bg-transparent text-white transition-colors;
}
.pill:hover {
  @apply bg-white/10 text-white;
}
.pill-active {
  @apply bg-white text-black;
}

/* Minimal range styling (cross-browser) */
input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 4px;
  background: white;
  outline: none;
}
/* iOS Safari needs explicit track styling */
input[type="range"]::-webkit-slider-runnable-track {
  height: 4px;
  background: white;
}
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  background: white;
  border: 1px solid black;
}
input[type="range"]::-moz-range-thumb {
  width: 16px;
  height: 16px;
  background: white;
  border: 1px solid black;
}
input[type="range"]::-moz-range-track {
  height: 4px;
  background: white;
}

/* Thicken icon strokes within circular controls */
.control-btn svg {
  stroke-width: 2.75;
}

@media (max-width: 480px) {
  .control-btn {
    width: 3.25rem;
    height: 3.25rem;
  }
  .control-btn.primary {
    width: 3.75rem;
    height: 3.75rem;
  }
  input[type="range"] {
    height: 4px;
  }
}

/* Equalizer animation for the now-playing indicator */
@keyframes eq-bounce {
  0%,
  100% {
    transform: scaleY(0.3);
  }
  50% {
    transform: scaleY(1);
  }
}
.eq-bar {
  width: 3px;
  height: 12px;
  background: currentColor;
  display: inline-block;
  transform-origin: bottom;
  animation: eq-bounce 1s infinite ease-in-out;
}
.eq-bar:nth-child(2) {
  height: 8px;
}
.eq-bar:nth-child(3) {
  height: 10px;
}

/* Fonts */
@font-face {
  font-family: "Atkinson";
  src: url("/fonts/atkinson-regular.woff") format("woff");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "Atkinson";
  src: url("/fonts/atkinson-bold.woff") format("woff");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/* Focus ring utility */
.focus-ring {
  @apply outline-none ring-2 ring-white ring-offset-2 ring-offset-black;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .eq-bar {
    animation: none !important;
  }
  .control-btn:active {
    transform: none;
  }
}
